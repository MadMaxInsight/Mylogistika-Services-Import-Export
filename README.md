# Mylogistika Services Import/Export

–ú–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —É—Å–ª—É–≥ (post-type == `services`) –≤ WordPress –Ω–∞ –æ—Å–Ω–æ–≤–µ CSV –∏ —à–∞–±–ª–æ–Ω–∞ Gutenberg-–±–ª–æ–∫–æ–≤.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

- `content_template.txt` ‚Äî —à–∞–±–ª–æ–Ω —Å Gutenberg-–±–ª–æ–∫–∞–º–∏ (ACF Blocks), –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã `{{...}}`.
- `import_posts.php` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞: —á–∏—Ç–∞–µ—Ç `services_import.csv`, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç/—Å–æ–∑–¥–∞—ë—Ç –ø–æ—Å—Ç—ã.
- `export_posts.php` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Å—Ç–æ–≤ –≤ CSV.
- `services_import.csv` ‚Äî CSV-—Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ (–¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–æ–≤).
- `services_export.csv` ‚Äî CSV-—Ñ–∞–π–ª, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ.
- `services-delete.php` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ —Ç–∏–ø–∞ `services`.
- `service-category-delete.php` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–∫—Å–æ–Ω–æ–º–∏–π/–∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥.
- `import_log.txt` ‚Äî –ª–æ–≥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è).

---

## üìù –†–∞–±–æ—Ç–∞ —Å `content_template.txt`

1. –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π JSON-–∫–æ–Ω—Ç–µ–Ω—Ç –±–ª–æ–∫–æ–≤ (–∫–∞–∫ –≤ –ë–î WP).  
2. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–º–∏—Å—è —Å `#`.  
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –¥–≤–æ–π–Ω—ã–µ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏:
   ```json
   "heading":{{blocks.docs.heading}} ‚Üí –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ CSV (blocks.docs.heading).
4. **–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª–∏ (Repeater ACF)** (–Ω–∞–ø—Ä–∏–º–µ—Ä `delivery_options`, `faq`, `packaging_options`) –≤ CSV –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ JSON-–º–∞—Å—Å–∏–≤:

   ```csv
   [{"title":"–ê–≤–∏–∞–¥–æ—Å—Ç–∞–≤–∫–∞","description":"–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞...","price":"–æ—Ç $15/–∫–≥"}]
   ```

   –í —à–∞–±–ª–æ–Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º `0` –∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏:

   ```json
   "delivery_options_0_title":{{blocks.price.delivery_options.item.title}},
   "delivery_options_0_description":{{blocks.price.delivery_options.item.description}},
   "delivery_options_0_price":{{blocks.price.delivery_options.item.price}}
   ```

   –°–∫—Ä–∏–ø—Ç —Å–∞–º —Ä–∞–∑–º–Ω–æ–∂–∏—Ç –±–ª–æ–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ JSON.

5. **–°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è ACF**

   –í —à–∞–±–ª–æ–Ω–µ **–º–æ–∂–Ω–æ —Å–º–µ–ª–æ –∏—Å–∫–ª—é—á–∞—Ç—å** –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ ACF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:  
   - –≤—Å–µ –∫–ª—é—á–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `_` (–Ω–∞–ø—Ä–∏–º–µ—Ä `_heading`, `_badge`, `_title`);  
   - –ø–∞—Ä–∞–º–µ—Ç—Ä `"mode": "edit"` –∏–ª–∏ `"mode": "preview"`.  

   ‚ö†Ô∏è –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: —É **Repeater ACF** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è:  
   - –ø–æ–ª–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`repeater_field_name: N`);  
   - —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ø–æ–ª–µ `_repeater_field_name` —Å `field_XXXXXX`.  

   ‚ùó–ë–µ–∑ —ç—Ç–∏—Ö –¥–≤—É—Ö –∑–Ω–∞—á–µ–Ω–∏–π **ACF –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å repeater**, –∏ –≤—ã–∑–æ–≤ `get_field('repeater_field_name')` –≤–µ—Ä–Ω—ë—Ç `null`.

---

## üñº –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

1. **ID –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞**:

   ```json
   "document_images_0_document_image":542
   ```

2. **–ü—É—Ç—å –≤ `uploads` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π)**:

   ```json
   "document_images_0_document_image":{{/wp-content/uploads/2025/03/doc-2.png}}
   ```

3. **–ü–æ–ª–Ω—ã–π URL**:

   ```json
   "document_images_0_document_image":{{https://example.com/wp-content/uploads/2025/03/doc-1.png}}
   ```

4. **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –∏–∑ CSV**:

   ```json
   "document_images_0_document_image":{{blocks.docs.image_from_csv}}
   ```

üîë –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ `post_content` –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **ID —Ñ–∞–π–ª–∞**.
–ï—Å–ª–∏ –ø—É—Ç—å/URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ‚Üí –±–µ—Ä—ë—Ç—Å—è –µ–≥–æ ID.
–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –µ—â—ë –Ω–µ—Ç –≤ –º–µ–¥–∏–∞—Ç–µ–∫–µ ‚Üí —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –µ–≥–æ –∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π ID.

---

## ‚öôÔ∏è –ò–º–ø–æ—Ä—Ç (`import_posts.php`)

* –ß–∏—Ç–∞–µ—Ç `services_import.csv`.
* –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ `content_template.txt`.
* –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (`services`).
* –û–±–Ω–æ–≤–ª—è–µ—Ç SEO-–ø–æ–ª—è Yoast (`_yoast_wpseo_title`, `_yoast_wpseo_metadesc`).
* –í—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –ø–∏—à—É—Ç—Å—è –≤ `import_log.txt`.

---

## üîÑ –≠–∫—Å–ø–æ—Ä—Ç (`export_posts.php`)

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ—Å—Ç—ã CPT `services` –≤ `services_export.csv` –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –±–ª–æ–∫–æ–≤.

---

## üóë –£–¥–∞–ª–µ–Ω–∏–µ

* `services-delete.php` ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø–æ—Å—Ç—ã CPT `services`.
* `service-category-delete.php` ‚Äî –æ—á–∏—â–∞–µ—Ç —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥).

---

## üöÄ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `content_template.txt` (–æ—Å—Ç–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ –±–ª–æ–∫–∏, –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ `{{...}}`).
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `services_import.csv`.
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å:

   ```bash
   php import_posts.php
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `import_log.txt` –∏ –∞–¥–º–∏–Ω–∫—É WP.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

### –¢–µ–∫—Å—Ç

```json
"heading":{{blocks.docs.heading}}
```

### HTML-—Å–ø–∏—Å–∫–∏

```json
"documents_list":{{blocks.docs.documents_list}}
```

### –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª—å

```json
"delivery_options_0_title":{{blocks.price.delivery_options.item.title}}
```

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```json
"document_images_0_document_image":{{/wp-content/uploads/2025/03/doc-2.png}}
```
